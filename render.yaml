services:
  - type: web
    name: hubz-backend
    runtime: docker
    plan: free
    region: frankfurt
    dockerfilePath: ./Dockerfile
    dockerContext: ./hubz-backend
    envVars:
      - key: JAVA_OPTS
        value: >-
          -Xmx256m
          -Xms128m
          -XX:MaxMetaspaceSize=128m
          -XX:+UseG1GC
          -XX:MaxGCPauseMillis=100
          -XX:+UseStringDeduplication
          -Djava.security.egd=file:/dev/./urandom
      - key: SPRING_PROFILES_ACTIVE
        sync: false
      - key: DATABASE_URL
        sync: false
      - key: DB_USERNAME
        sync: false
      - key: DB_PASSWORD
        sync: false
      - key: JWT_SECRET
        sync: false
      - key: CORS_ALLOWED_ORIGINS
        sync: false
      - key: FRONTEND_URL
        sync: false
      - key: MAIL_HOST
        sync: false
      - key: MAIL_PORT
        sync: false
      - key: MAIL_USERNAME
        sync: false
      - key: MAIL_PASSWORD
        sync: false
      - key: MAIL_FROM
        sync: false
      - key: EMAIL_VERIFICATION_REQUIRED
        sync: false
      - key: GOOGLE_CLIENT_ID
        sync: false
      - key: GOOGLE_CLIENT_SECRET
        sync: false
      - key: GOOGLE_REDIRECT_URI
        sync: false
      - key: OLLAMA_ENABLED
        value: false

  - type: pserv
    name: hubz-postgres
    plan: free
    databaseName: hubzdb
    user: hubz_user
